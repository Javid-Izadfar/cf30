<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    hi
  </body>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
  <script>
    console.log(_.inRange(3, 2, 4));

    // const prom = new Promise((resolve, reject) => {
    //   console.log("inside promise");
    //   if (true) {
    //     resolve();
    //   } else {
    //     reject();
    //   }
    //   console.log("after resolve");
    // });

    // console.log(prom);

    const double = (x) => {
      return new Promise((resolve, reject) => {
        console.log("x", x);

        // console.log("inside promise");

        setTimeout(() => {
          if (x < 10) {
            // console.log("before resolve");
            resolve(x * 2);
            // console.log("after resolve");
          } else {
            reject("number is too high");
          }
        }, 1000);
        // console.log("after setTimeout");
      });
    };

    // double(2).then((result) => {
    //   console.log("after double", result);
    // });
    // double(300).catch((error) => {
    //   console.log("after error", error);
    // });

    // callback
    // double(2)
    //   .then((result) => {
    //     console.log("result", result);
    //     // double(3)
    //     //   .then((result2) => {
    //     //     console.log(result2);
    //     //   })
    //     //   .catch((error2) => {
    //     //     console.log("error2", error2);
    //     //   });
    //   })
    //   .catch((error) => {
    //     console.log("error", error);
    //   });

    // async/await
    const wrapperDouble = async () => {
      console.log("before");

      const foo = await double(2);
      console.log(foo);

      try {
        const bar = await double(foo * 10);
        console.log(bar);
      } catch (error) {
        alert(error);
      }
    };
    // wrapperDouble();

    const wrapperDouble2 = async () => {
      //   const double2 = await double(2);
      //   const double3 = await double(3);

      const [double2, double3] = await Promise.all([double(2), double(3)]);
      //   console.log(result[0] + result[1]);

      console.log(double2 + double3);
    };
    // wrapperDouble2();

    // const getJoke = () => {
    //   fetch("https://api.chucknorris.io/jokes/random")
    //     .then((response) => {
    //       console.log("response", response);
    //       return response.json();
    //     })
    //     .then((result) => {
    //     //   console.log("result", result);
    //       alert(result.value);
    //     });
    // };
    const getJoke = async () => {
      const response = await fetch("https://api.chucknorris.io/jokes/random");
      const result = await response.json();
      alert(result.value);
    };
    getJoke();
  </script>
</html>
